import{p as ne,a2 as Se,c as $e,w as s,k as y,l as k,o as p,f as r,a as o,j as f,a8 as _,a5 as w,h as R,Q as O,a7 as m,a6 as q,a9 as D,aa as I,d as F,e as qe,C as W,ab as Qe,g as Y,b as C,aq as ie,i as Ae,at as Q}from"./app-0ed78742.js";import{Q as Be,a as J}from"./QTable-8284a098.js";import{Q as Te}from"./QLinearProgress-80fe61c1.js";import{Q as A}from"./QTooltip-ce499ceb.js";import{Q as Pe}from"./QSpace-d597acc7.js";import{S as u,Q as M}from"./sweetalert2.esm.all-c018c2c0.js";import{Q as Ne,a as De,h as Ie}from"./html2canvas.esm-0550811c.js";import{Q as Me}from"./QForm-78e9a40e.js";import{Q as Ue}from"./QPage-3f84e0e7.js";import{C as X}from"./ClosePopup-3f7efd4c.js";import{u as Le}from"./use-quasar-ad09a648.js";import{_ as Re}from"./_plugin-vue_export-helper-c27b6911.js";import"./format-dfd5180a.js";import"./position-engine-402b4c53.js";import"./QChip-92718629.js";const Fe={class:"row items-center justify-between q-mb-lg"},He={class:"row items-center q-gutter-x-md"},Ke=["innerHTML"],Ge={class:"column items-center q-gutter-y-xs",style:{"min-width":"140px"}},Oe={class:"row full-width justify-between text-caption text-grey-8"},We={class:"text-weight-bold"},Ye={class:"row justify-center q-gutter-x-sm no-wrap"},Je={class:"full-width row flex-center text-grey-6 q-pa-lg"},Xe={id:"rose-capture-container",dir:"rtl",style:{position:"fixed",left:"0",top:"0",width:"600px",background:"#FFCCBC","z-index":"-100","font-family":"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",direction:"rtl",padding:"20px",border:"1px solid #E64A19"}},Ze={style:{"text-align":"center","margin-bottom":"20px","border-bottom":"2px solid #E64A19","padding-bottom":"10px"}},et={style:{width:"100%",margin:"5px 0 10px 0"}},tt={style:{"text-align":"right",width:"50%","padding-left":"10px"}},ot={dir:"ltr",style:{"font-size":"22px","font-weight":"bold",color:"#3E2723","font-family":"sans-serif"}},at={key:0,style:{margin:"5px 0",color:"#5D4037","font-size":"18px","font-weight":"bold","text-decoration":"underline"}},rt={key:1,style:{"font-size":"16px",color:"#3E2723","font-weight":"bold","margin-top":"5px"}},lt={style:{display:"flex","flex-wrap":"wrap",margin:"0 -10px"}},st={style:{width:"50%",padding:"0 10px","box-sizing":"border-box"}},nt={style:{width:"100%","border-collapse":"collapse"}},it={style:{"text-align":"right",padding:"5px","font-size":"16px","font-weight":"bold",color:"#3E2723"}},dt={style:{"text-align":"left",padding:"5px","font-size":"16px","font-weight":"bold",color:"#3E2723"}},ct={style:{display:"flex","flex-wrap":"wrap",gap:"4px","justify-content":"flex-start",direction:"ltr"}},pt={key:0},ut={key:0,style:{"margin-left":"2px"}},mt={style:{width:"50%",padding:"0 10px","box-sizing":"border-box","border-right":"1px dashed #E64A19"}},ft={style:{width:"100%","border-collapse":"collapse"}},gt={style:{"text-align":"right",padding:"5px","font-size":"16px","font-weight":"bold",color:"#3E2723"}},ht={style:{"text-align":"left",padding:"5px","font-size":"16px","font-weight":"bold",color:"#3E2723"}},yt={style:{display:"flex","flex-wrap":"wrap",gap:"4px","justify-content":"flex-start",direction:"ltr"}},bt={key:0},xt={key:0,style:{"margin-left":"2px"}},_t={class:"text-h6 text-weight-bold"},vt={class:"row q-col-gutter-md"},wt={class:"col-12"},kt={class:"col-12 col-md-6"},Ct={class:"col-12 col-md-6"},zt={class:"col-12 col-md-6"},Vt={class:"col-12 col-md-6"},Et={class:"q-pa-md bg-white row q-gutter-sm",style:{"min-width":"300px"}},jt={class:"q-mt-md"},St={class:"row justify-end q-mt-xl"},$t={__name:"KhatmaTilawaPage",setup(qt){const V=Le(),Z=y([]),de=async a=>{var e,t;try{Q.show({message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©..."});const d=(await k.get("/api/tilawa-khatma-assignments",{params:{khatma_id:a.id}})).data,c=new Map;d.forEach(x=>{var z;const g=((z=x.user)==null?void 0:z.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",n=!!x.read;c.has(g)||c.set(g,{userName:g,finished:!0});const h=c.get(g);n||(h.finished=!1)});const P=Array.from(c.values()).filter(x=>x.finished&&x.userName!=="ØºÙŠØ± Ù…Ø­Ø¯Ø¯").map(x=>x.userName),N=a.khatma_no||"---",L=((e=a.group_reading)==null?void 0:e.group_no)||"---",$=((t=a.group_reading)==null?void 0:t.names)||"";let b=`Ø§Ù„Ø®ØªÙ…Ø© Ø±Ù‚Ù… (${N})
`;b+=`Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±Ù‚Ù… (${L})
`,$&&(b+=`${$}
`),b+=`Ø§Ù„Ø³Ø¨Ù‘Ø§Ù‚ÙˆÙ† Ø¬Ø¯Ø§Ù‹ Ø¬Ø¯Ø§Ù‹ Ùˆ Ø§Ù„Ù…Ø³Ø§Ø±Ø¹ÙˆÙ† Ù„Ù„Ø®ÙŠØ±Ø§Øª
`,b+=`${P.join("Ø› ")}

`,b+="Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„ÙŠ Ø£Ù† ÙŠØ¬Ø²ÙŠÙ‡Ù… Ø®ÙŠØ± Ø§Ù„Ø¬Ø²Ø§Ø¡ ÙˆØ£Ù† ÙŠØ¬Ø¹Ù„ Ø«ÙˆØ§Ø¨ ØªÙ„Ø§ÙˆØªÙ‡Ù… Ø±Ø­Ù…Ø©Ù‹ ÙˆÙ†ÙˆØ±Ø§Ù‹";try{if(navigator.share)await navigator.share({text:b,title:"Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ„Ø§ÙˆØ©"});else throw new Error("Web Share API not supported")}catch{let g=!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(b),g=!0}catch(n){console.error("Clipboard API failed",n)}if(!g){const n=document.createElement("textarea");n.value=b,n.style.position="fixed",n.style.left="-9999px",n.style.top="0",document.body.appendChild(n),n.focus(),n.select();try{g=document.execCommand("copy")}catch(h){console.error("execCommand copy failed",h)}document.body.removeChild(n)}if(g)u.fire({icon:"success",title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",text:"ØªÙ… Ù†Ø³Ø® Ù†Øµ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù„Ù„Ø­Ø§ÙØ¸Ø© (Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ ÙˆØ§ØªØ³Ø§Ø¨)",timer:3e3,showConfirmButton:!1});else throw new Error("ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©")}Q.hide()}catch(l){Q.hide(),console.error("Share failed",l),u.fire({icon:"error",title:"Ø®Ø·Ø£",text:l.message||"ÙØ´Ù„ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª."})}},ce=(a,e="khatma-share.png")=>{const t=document.createElement("a");t.download=e,t.href=a.toDataURL(),document.body.appendChild(t),t.click(),document.body.removeChild(t),u.fire({icon:"success",title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",text:"ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©",timer:2e3,showConfirmButton:!1})},v=y({khatma_no:"",group_name:"",people_group_no:"",description_text:"",parts:[]}),pe=ne(()=>v.value.parts.slice(0,Math.ceil(v.value.parts.length/2))),ue=ne(()=>v.value.parts.slice(Math.ceil(v.value.parts.length/2))),me=async a=>{var e,t;try{Q.show({message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ±..."});const d=(await k.get("/api/tilawa-khatma-assignments",{params:{khatma_id:a.id}})).data,c=new Map,P=a.juz_count||30;for(let n=1;n<=P;n++){const h=d.find(se=>se.parts&&se.parts.includes(n)),z=h?h.user.name:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",je=h?!!h.read:!1;c.has(z)||c.set(z,{userName:z,parts:[],reads:[]});const le=c.get(z);le.parts.push(n),le.reads.push(je)}const N=Array.from(c.values()),L=[];for(let n=0;n<N.length;n+=2)L.push({right:N[n],left:N[n+1]||null});const $=document.getElementById("capture-container");if(!$)return;$.innerHTML=`
            <div dir="rtl" style="padding: 20px; background: white; font-family: 'Segoe UI', 'Tahoma', sans-serif;">
                <table style="width: 100%; border-collapse: collapse; text-align: center; border: 0;">
                    <thead>
                        <tr>
                            <th colspan="4" style="padding: 10px; font-size: 18px; border: 0; background: #fff;">Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…</th>
                        </tr>
                        <tr>
                            <th colspan="4" style="padding: 8px; font-size: 16px; border: 0; background: #fff;">Ø®ØªÙ…Ø© Ø±Ù‚Ù…: ${a.khatma_no||"---"}</th>
                        </tr>
                        <tr>
                            <th colspan="4" style="padding: 8px; font-size: 16px; border: 0; background: #fff;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±Ù‚Ù… (${((e=a.group_reading)==null?void 0:e.group_no)||"---"})</th>
                        </tr>
                        <tr>
                            <th colspan="4" style="padding: 8px; font-size: 14px; border: 0; color: #555; background: #fff;">${((t=a.group_reading)==null?void 0:t.names)||"Ø£Ø³Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©"}</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${L.map(n=>`
                            <tr>
                                <!-- Right Pair -->
                                <td style="padding: 8px; text-align: right; font-size: 15px; font-weight: bold; width: 30%; border: 0;">${n.right.userName}</td>
                                <td style="padding: 8px; text-align: right; font-size: 14px; width: 20%; border: 0;">
                                    <div style="direction: rtl;">
                                        ${n.right.parts.join("ØŒ ")}${n.right.reads.every(h=>h)?"ğŸŒ¹":""}
                                    </div>
                                </td>

                                <!-- Left Pair -->
                                ${n.left?`
                                    <td style="padding: 8px; text-align: right; font-size: 15px; font-weight: bold; width: 30%; border: 0;">${n.left.userName}</td>
                                    <td style="padding: 8px; text-align: right; font-size: 14px; width: 20%; border: 0;">
                                        <div style="direction: rtl;">
                                            ${n.left.parts.join("ØŒ ")}${n.left.reads.every(h=>h)?"ğŸŒ¹":""}
                                        </div>
                                    </td>
                                `:'<td style="border: 0;"></td><td style="border: 0;"></td>'}
                            </tr>
                        `).join("")}
                    </tbody>
                </table>

                <div style="margin-top: 20px; text-align: center; color: #888; font-size: 12px;">
                    ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø³Ø·Ø© ØªØ·Ø¨ÙŠÙ‚ Ø®ØªÙ…Ø©
                </div>
            </div>
        `,await new Promise(n=>setTimeout(n,300));const b=await Ie($,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),x=await new Promise(n=>b.toBlob(n,"image/png"));if(Q.hide(),!x)throw new Error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©");const g=new File([x],"khatma-tilawa-share.png",{type:"image/png"});navigator.canShare&&navigator.canShare({files:[g]})?await navigator.share({files:[g],title:"ØªÙˆØ²ÙŠØ¹ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø®ØªÙ…Ø©",text:"Ø´Ø§Ù‡Ø¯ ØªÙˆØ²ÙŠØ¹ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø®ØªÙ…Ø© ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø©"}):ce(b,"khatma-tilawa-share.png")}catch(l){Q.hide(),console.error("Share failed",l),u.fire({icon:"error",title:"Ø®Ø·Ø£",text:l.message||"ÙØ´Ù„ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})}},ee=y([]),te=y([]),H=y(!1),B=y(!1),T=y(!1),i=y({id:null,group_id:null,group_reading_id:null,khatma_no:"",description:"",hijri_date:"",juz_count:30}),fe=[{name:"id",label:"#",field:"id",sortable:!0,align:"left",style:"width: 50px"},{name:"group_id",label:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©",field:a=>{var e;return((e=a.group)==null?void 0:e.name)||""},sortable:!0,align:"center"},{name:"hijri_date",label:"Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ",field:"hijri_date",sortable:!0,align:"center"},{name:"khatma_no",label:"Ø±Ù‚Ù… Ø§Ù„Ø®ØªÙ…Ø©",field:"khatma_no",sortable:!0,align:"left"},{name:"group_reading_id",label:"Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©",field:a=>a.group_reading?`${a.group_reading.group_no} - ${a.group_reading.names}`:"",sortable:!0,align:"center"},{name:"progress",label:"Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²",field:"progress",align:"center"},{name:"actions",label:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",field:"actions"}],K=async()=>{H.value=!0;try{const a=await k.get("/api/khatmas",{params:{type:"tilawa"}});Z.value=a.data}catch(a){console.error("Error fetching khatmas:",a),u.fire({icon:"error",title:"ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„",text:"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®ØªÙ…Ø§Øª"})}finally{H.value=!1}},oe=async()=>{try{const a=await k.get("/api/groups",{params:{type:"tilawa"}});ee.value=a.data}catch{console.error("Error fetching groups")}},ae=async()=>{try{const a=await k.get("/api/group-readings");te.value=a.data}catch{console.error("Error fetching reading groups")}},ge=()=>{T.value=!1,i.value={id:null,group_id:null,group_reading_id:null,khatma_no:"",description:"",hijri_date:"",juz_count:30},re(""),oe(),ae(),B.value=!0},he=a=>{T.value=!0,i.value={...a},re(a.hijri_date),oe(),ae(),B.value=!0},ye=async()=>{try{T.value?(await k.put(`/api/khatmas/${i.value.id}`,i.value),u.fire({icon:"success",title:"ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„",text:"ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®ØªÙ…Ø© Ø¨Ù†Ø¬Ø§Ø­",timer:1500,showConfirmButton:!1})):(await k.post("/api/khatmas",i.value),u.fire({icon:"success",title:"ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡",text:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®ØªÙ…Ø© Ø¨Ù†Ø¬Ø§Ø­",timer:1500,showConfirmButton:!1})),B.value=!1,K()}catch(a){if(console.error("Error saving khatma:",a),a.response&&a.response.status===422){const e=a.response.data.message||"Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø©";u.fire({icon:"error",title:"Ø®Ø·Ø£",text:e})}else u.fire({icon:"error",title:"Ø®Ø·Ø£",text:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸"})}},be=()=>{i.value.description+=`
        <table border="1" style="width:100%; border-collapse: collapse; border-color: #ddd;">
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th style="padding: 8px;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† 1</th>
                    <th style="padding: 8px;">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† 2</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px;">Ø¨ÙŠØ§Ù†Ø§Øª 1</td>
                    <td style="padding: 8px;">Ø¨ÙŠØ§Ù†Ø§Øª 2</td>
                </tr>
            </tbody>
        </table>
        <p>&nbsp;</p>
    `},U=y(!1),xe=["ğŸ¤²","ğŸ•Œ","ğŸŒ™","â­","âœ…","âœ¨","ğŸ“–","ğŸ“¿","ğŸ•‹","ğŸ•¯ï¸","ğŸŒ¹","ğŸ’","ğŸŸ¢","ğŸ”´","ğŸ”¹","ğŸ”¸","ğŸ‘‹","â¤ï¸","ğŸ‘","ğŸ‰"],_e=()=>{U.value=!0},ve=a=>{i.value.description+=a,U.value=!1},we={days:["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"],daysShort:["Ø£Ø­Ø¯","Ø§Ø«Ù†ÙŠÙ†","Ø«Ù„Ø§Ø«Ø§Ø¡","Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø®Ù…ÙŠØ³","Ø¬Ù…Ø¹Ø©","Ø³Ø¨Øª"],months:["Ù…Ø­Ø±Ù…","ØµÙØ±","Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ„","Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ","Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø£ÙˆÙ„Ù‰","Ø¬Ù…Ø§Ø¯Ù‰ Ø§Ù„Ø¢Ø®Ø±Ø©","Ø±Ø¬Ø¨","Ø´Ø¹Ø¨Ø§Ù†","Ø±Ù…Ø¶Ø§Ù†","Ø´ÙˆØ§Ù„","Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©","Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"],monthsShort:["Ù…Ø­Ø±Ù…","ØµÙØ±","Ø±Ø¨ÙŠØ¹ 1","Ø±Ø¨ÙŠØ¹ 2","Ø¬Ù…Ø§Ø¯Ù‰ 1","Ø¬Ù…Ø§Ø¯Ù‰ 2","Ø±Ø¬Ø¨","Ø´Ø¹Ø¨Ø§Ù†","Ø±Ù…Ø¶Ø§Ù†","Ø´ÙˆØ§Ù„","Ø°Ùˆ Ø§Ù„Ù‚Ø¹Ø¯Ø©","Ø°Ùˆ Ø§Ù„Ø­Ø¬Ø©"]},E=y(""),j=y(""),S=y(""),ke=Array.from({length:30},(a,e)=>e+1),Ce=Array.from({length:10},(a,e)=>1445+e),G=()=>{E.value&&j.value&&S.value&&(i.value.hijri_date=`${E.value} ${j.value} ${S.value}`)},re=a=>{if(!a){E.value="",j.value="",S.value="";return}const e=a.split(" ");e.length===3&&(E.value=parseInt(e[0])||e[0],j.value=e[1],S.value=parseInt(e[2])||e[2])},ze=a=>{u.fire({title:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",text:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø®ØªÙ…Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø§ØŸ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°ÙÙ‡Ø§",cancelButtonText:"Ø¥Ù„ØºØ§Ø¡"}).then(async e=>{if(e.isConfirmed)try{await k.delete(`/api/khatmas/${a.id}`),u.fire("ØªÙ… Ø§Ù„Ø­Ø°Ù!","ØªÙ… Ø­Ø°Ù Ø§Ù„Ø®ØªÙ…Ø© Ø¨Ù†Ø¬Ø§Ø­.","success"),K()}catch(t){console.error("Error deleting khatma:",t),u.fire({icon:"error",title:"Ø®Ø·Ø£",text:"ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù"})}})},Ve=a=>{if(!a)return"";const e=document.createElement("div");return e.innerHTML=a,e.querySelectorAll("br").forEach(l=>l.replaceWith(`
`)),e.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, tr").forEach(l=>{l.append(`
`)}),e.querySelectorAll("li").forEach(l=>{l.prepend("â€¢ "),l.append(`
`)}),e.querySelectorAll("td, th").forEach(l=>{l.append(" | ")}),e.querySelectorAll("th").forEach(l=>{l.prepend("*"),l.append("*")}),e.querySelectorAll("b, strong, h1, h2, h3, h4, h5, h6").forEach(l=>{l.prepend("*"),l.append("*")}),e.querySelectorAll("i, em").forEach(l=>{l.prepend("_"),l.append("_")}),(e.textContent||e.innerText||"").replace(/\n\s+\n/g,`

`).replace(/\n{3,}/g,`

`).replace(/\|\s*\|/g,"|").trim()},Ee=async a=>{const e=a.description;if(!e){u.fire({icon:"info",title:"ØªÙ†Ø¨ÙŠÙ‡",text:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù„Ù„Ù†Ø³Ø®",timer:1500,showConfirmButton:!1});return}const t=Ve(e);try{if(typeof ClipboardItem<"u"&&navigator.clipboard&&navigator.clipboard.write){const d=new ClipboardItem({"text/html":new Blob([e],{type:"text/html"}),"text/plain":new Blob([t],{type:"text/plain"})});await navigator.clipboard.write([d]),u.fire({icon:"success",title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",text:"ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚",timer:1500,showConfirmButton:!1});return}}catch(d){console.warn("Modern Clipboard API failed, trying fallback...",d)}const l=document.createElement("div");l.innerHTML=e,l.style.position="fixed",l.style.left="-9999px",l.style.top="0",document.body.appendChild(l);try{const d=document.createRange();d.selectNodeContents(l);const c=window.getSelection();c.removeAllRanges(),c.addRange(d);const P=document.execCommand("copy");if(c.removeAllRanges(),P)u.fire({icon:"success",title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",text:"ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„ØªÙ†Ø³ÙŠÙ‚",timer:1500,showConfirmButton:!1});else throw new Error("Selection copy failed")}catch(d){console.error("Final copy fallback failed",d),u.fire({icon:"error",title:"Ø®Ø·Ø£",text:"ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®"})}finally{document.body.removeChild(l)}};return Se(()=>{K()}),(a,e)=>(p(),$e(Ue,{class:"q-pa-md"},{default:s(()=>[r("div",Fe,[r("div",He,[o(f,{round:"",flat:"",color:"primary",icon:"arrow_forward",to:"/app"}),e[11]||(e[11]=r("div",null,[r("div",{class:"text-h4 text-primary text-weight-bold text-islamic"},"Ø®ØªÙ…Ø© ØªÙ„Ø§ÙˆØ©"),r("div",{class:"text-subtitle2 text-grey-7"},"Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø®ØªÙ…Ø§Øª ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª")],-1))]),o(f,{unelevated:"",rounded:"",color:"primary",icon:"add",label:"Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©",onClick:ge,class:"shadow-3 q-px-md"})]),o(O,{class:"glass-card q-pa-sm"},{default:s(()=>[o(Be,{rows:Z.value,columns:fe,"row-key":"id",loading:H.value,flat:"",separator:"none",class:"bg-transparent text-grey-9 custom-table","table-header-class":"text-primary text-weight-bold bg-primary-1 rounded-borders"},{"body-cell-description":s(t=>[o(J,{props:t},{default:s(()=>[r("div",{class:"text-grey-8 ellipsis",style:{"max-width":"200px"},innerHTML:t.row.description},null,8,Ke)]),_:2},1032,["props"])]),"body-cell-progress":s(t=>[o(J,{props:t},{default:s(()=>[r("div",Ge,[o(Te,{value:t.row.progress?t.row.progress.percentage/100:0,color:"teal","track-color":"grey-3",rounded:"",size:"12px",class:"shadow-1"},null,8,["value"]),r("div",Oe,[r("span",We,_(t.row.progress?t.row.progress.percentage:0)+"% Ù…ÙƒØªÙ…Ù„",1),r("span",null,_(t.row.progress?`${t.row.progress.finished}/${t.row.progress.total}`:"0/0"),1)])])]),_:2},1032,["props"])]),"body-cell-actions":s(t=>[o(J,{props:t,"auto-width":""},{default:s(()=>[r("div",Ye,[o(f,{flat:"",round:"",color:"teal-7",icon:"content_copy",size:"sm",class:"bg-teal-1 action-btn",onClick:l=>Ee(t.row)},{default:s(()=>[o(A,null,{default:s(()=>[...e[12]||(e[12]=[w("Ù†Ø³Ø® Ø§Ù„ÙˆØµÙ",-1)])]),_:1})]),_:1},8,["onClick"]),o(f,{flat:"",round:"",color:"teal-7",icon:"fa-brands fa-whatsapp",size:"sm",class:"bg-teal-1 action-btn",onClick:l=>de(t.row)},{default:s(()=>[o(A,null,{default:s(()=>[...e[13]||(e[13]=[w("Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨",-1)])]),_:1})]),_:1},8,["onClick"]),o(f,{flat:"",round:"",color:"deep-purple-7",icon:"assignment_ind",size:"sm",class:"bg-deep-purple-1 action-btn",to:`/khatma-tilawa/${t.row.id}/assign`},{default:s(()=>[o(A,null,{default:s(()=>[...e[14]||(e[14]=[w("ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡",-1)])]),_:1})]),_:1},8,["to"]),o(f,{flat:"",round:"",color:"primary-7",icon:"edit",size:"sm",class:"bg-primary-1 action-btn",onClick:l=>he(t.row)},{default:s(()=>[o(A,null,{default:s(()=>[...e[15]||(e[15]=[w("ØªØ¹Ø¯ÙŠÙ„",-1)])]),_:1})]),_:1},8,["onClick"]),o(f,{flat:"",round:"",color:"red-7",icon:"delete",size:"sm",class:"bg-red-1 action-btn",onClick:l=>ze(t.row)},{default:s(()=>[o(A,null,{default:s(()=>[...e[16]||(e[16]=[w("Ø­Ø°Ù",-1)])]),_:1})]),_:1},8,["onClick"]),o(f,{flat:"",round:"",color:"pink-7",icon:"local_florist",size:"sm",class:"bg-pink-1 action-btn",onClick:l=>me(t.row)},{default:s(()=>[o(A,null,{default:s(()=>[...e[17]||(e[17]=[w("ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Ø§Ù„ÙˆØ±Ø¯Ø©",-1)])]),_:1})]),_:1},8,["onClick"])])]),_:2},1032,["props"])]),"no-data":s(()=>[r("div",Je,[o(R,{name:"warning",size:"sm",class:"q-mr-sm"}),e[18]||(e[18]=w(" Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®ØªÙ…Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹ ",-1))])]),_:1},8,["rows","loading"])]),_:1}),e[23]||(e[23]=r("div",{id:"capture-container",style:{position:"fixed",left:"-9999px",top:"0",width:"600px",background:"white","z-index":"-1"}},null,-1)),r("div",Xe,[r("div",Ze,[r("table",et,[r("tr",null,[e[19]||(e[19]=r("td",{style:{"text-align":"left",width:"50%","padding-right":"10px"}},[r("span",{style:{"font-size":"22px","font-weight":"bold",color:"#3E2723"}},"Ø§Ù„Ø®ØªÙ…Ø© Ø±Ù‚Ù…")],-1)),r("td",tt,[r("span",ot,"("+_(v.value.khatma_no)+")",1)])])]),v.value.group_name?(p(),m("h3",at," Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±Ù‚Ù… ("+_(v.value.people_group_no||"---")+") ",1)):q("",!0),v.value.description_text?(p(),m("div",rt,_(v.value.description_text),1)):q("",!0),e[20]||(e[20]=r("div",{style:{"text-align":"right","margin-top":"10px",color:"#BF360C","font-weight":"bold","font-size":"16px"}}," ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ù„Ù„ØªÙ„Ø§ÙˆØ© ",-1))]),r("div",lt,[r("div",st,[r("table",nt,[(p(!0),m(I,null,D(pe.value,(t,l)=>(p(),m("tr",{key:l},[r("td",it,_(t.userName),1),r("td",dt,[r("div",ct,[(p(!0),m(I,null,D(t.parts,(d,c)=>(p(),m("span",{key:c},[w(_(d),1),c<t.parts.length-1?(p(),m("span",pt,"ØŒ ")):q("",!0)]))),128)),t.reads.every(d=>d)?(p(),m("span",ut,"ğŸŒ¹")):q("",!0)])])]))),128))])]),r("div",mt,[r("table",ft,[(p(!0),m(I,null,D(ue.value,(t,l)=>(p(),m("tr",{key:l},[r("td",gt,_(t.userName),1),r("td",ht,[r("div",yt,[(p(!0),m(I,null,D(t.parts,(d,c)=>(p(),m("span",{key:c},[w(_(d),1),c<t.parts.length-1?(p(),m("span",bt,"ØŒ ")):q("",!0)]))),128)),t.reads.every(d=>d)?(p(),m("span",xt,"ğŸŒ¹")):q("",!0)])])]))),128))])])])]),o(ie,{modelValue:B.value,"onUpdate:modelValue":e[9]||(e[9]=t=>B.value=t),"transition-show":"scale","transition-hide":"scale",persistent:"",maximized:""},{default:s(()=>[o(O,{class:"shadow-24 overflow-hidden"},{default:s(()=>[o(F,{class:"bg-primary text-white row items-center q-py-md q-px-lg"},{default:s(()=>[o(qe,{icon:"menu_book",color:"primary-8","text-color":"white",size:"md",class:"q-mr-md"}),r("div",_t,_(T.value?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®ØªÙ…Ø©":"Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©"),1),o(Pe),W(o(f,{icon:"close",flat:"",round:"",dense:"",class:"text-white op-70 hover-op-100"},null,512),[[X]])]),_:1}),o(Qe,{color:"primary-10"}),o(F,{class:"q-pa-lg scroll",style:{"max-height":"calc(100vh - 150px)"}},{default:s(()=>[o(Me,{onSubmit:ye,class:"q-gutter-md",style:{"max-width":"800px",margin:"0 auto"}},{default:s(()=>[r("div",vt,[r("div",wt,[o(M,{filled:"",dense:"",modelValue:i.value.group_id,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.group_id=t),options:ee.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØªØ§Ø¨Ø¹Ø© Ù„Ù‡Ø§",color:"primary","bg-color":"grey-1",class:"rounded-borders",rules:[t=>!!t||"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©"]},{prepend:s(()=>[o(R,{name:"group",color:"primary"})]),_:1},8,["modelValue","options","rules"])]),r("div",kt,[o(Y,{filled:"",dense:"",modelValue:i.value.khatma_no,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.khatma_no=t),label:"Ø±Ù‚Ù… Ø§Ù„Ø®ØªÙ…Ø© (Ù…Ø«Ø§Ù„: 2026/3)",color:"primary","bg-color":"grey-1",class:"rounded-borders"},null,8,["modelValue"])]),r("div",Ct,[o(M,{filled:"",dense:"",modelValue:i.value.group_reading_id,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.group_reading_id=t),options:te.value,"option-value":"id","option-label":t=>t?`${t.group_no} - ${t.names}`:"","emit-value":"","map-options":"",label:"Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©",color:"primary","bg-color":"grey-1",class:"rounded-borders"},{prepend:s(()=>[o(R,{name:"format_list_numbered",color:"primary"})]),_:1},8,["modelValue","options","option-label"])]),r("div",zt,[o(Y,{filled:"",dense:"",modelValue:i.value.juz_count,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value.juz_count=t),modelModifiers:{number:!0},label:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡",type:"number",color:"primary","bg-color":"grey-1",class:"rounded-borders",rules:[t=>t>0||"ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† 0"]},null,8,["modelValue","rules"])]),r("div",Vt,[o(Y,{filled:"",dense:"",modelValue:i.value.hijri_date,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.hijri_date=t),label:"Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‡Ø¬Ø±ÙŠ",color:"primary","bg-color":"grey-1",class:"rounded-borders",readonly:""},{append:s(()=>[o(R,{name:"event",class:"cursor-pointer"},{default:s(()=>[o(Ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[r("div",Et,[o(M,{dense:"",outlined:"",modelValue:E.value,"onUpdate:modelValue":[e[4]||(e[4]=t=>E.value=t),G],options:C(ke),label:"Ø§Ù„ÙŠÙˆÙ…",class:"col"},null,8,["modelValue","options"]),o(M,{dense:"",outlined:"",modelValue:j.value,"onUpdate:modelValue":[e[5]||(e[5]=t=>j.value=t),G],options:we.months,label:"Ø§Ù„Ø´Ù‡Ø±",class:"col-grow"},null,8,["modelValue","options"]),o(M,{dense:"",outlined:"",modelValue:S.value,"onUpdate:modelValue":[e[6]||(e[6]=t=>S.value=t),G],options:C(Ce),label:"Ø§Ù„Ø³Ù†Ø©",class:"col"},null,8,["modelValue","options"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",jt,[e[21]||(e[21]=r("label",{class:"text-weight-bold text-grey-8 q-mb-sm block"},"ÙˆØµÙ Ø§Ù„Ø®ØªÙ…Ø© ÙˆØªÙØ§ØµÙŠÙ„Ù‡Ø§",-1)),o(De,{modelValue:i.value.description,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.description=t),"min-height":"15rem",definitions:{insert_table:{tip:"Ø¥Ø¯Ø±Ø§Ø¬ Ø¬Ø¯ÙˆÙ„",icon:"table_chart",label:"Ø¬Ø¯ÙˆÙ„",handler:be},insert_emoji:{tip:"Ø¥Ø¯Ø±Ø§Ø¬ Ø±Ù…Ø² ØªØ¹Ø¨ÙŠØ±ÙŠ",icon:"sentiment_satisfied_alt",label:"Ø¥ÙŠÙ…ÙˆØ¬ÙŠ",handler:_e}},toolbar:[["bold","italic","strike","underline","subscript","superscript"],["left","center","right","justify"],["insert_table","insert_emoji"],["print","fullscreen"],[{label:C(V).lang.editor.formatting,icon:C(V).iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:C(V).lang.editor.fontSize,icon:C(V).iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:C(V).lang.editor.defaultFont,icon:C(V).iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","definitions","toolbar"])]),r("div",St,[W(o(f,{label:"Ø¥Ù„ØºØ§Ø¡",color:"grey-7",flat:"",class:"q-mr-sm"},null,512),[[X]]),o(f,{label:T.value?"Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª":"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®ØªÙ…Ø©",type:"submit",color:"primary",icon:"save",unelevated:"",class:"q-px-lg shadow-2",style:{"border-radius":"10px"}},null,8,["label"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(ie,{modelValue:U.value,"onUpdate:modelValue":e[10]||(e[10]=t=>U.value=t)},{default:s(()=>[o(O,{style:{width:"300px"}},{default:s(()=>[o(F,null,{default:s(()=>[...e[22]||(e[22]=[r("div",{class:"text-h6"},"Ø§Ø®ØªØ± Ø±Ù…Ø²Ø§Ù‹",-1)])]),_:1}),o(F,{class:"row q-gutter-sm justify-center"},{default:s(()=>[(p(),m(I,null,D(xe,t=>o(f,{key:t,flat:"",dense:"",size:"lg",label:t,onClick:l=>ve(t),class:"emoji-btn"},null,8,["label","onClick"])),64))]),_:1}),o(Ae,{align:"right"},{default:s(()=>[W(o(f,{flat:"",label:"Ø¥ØºÙ„Ø§Ù‚",color:"primary"},null,512),[[X]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Gt=Re($t,[["__scopeId","data-v-3eb3073f"]]);export{Gt as default};
