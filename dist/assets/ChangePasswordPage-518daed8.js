import{u as _,c as f,w as o,o as g,a as l,d as i,g as n,h as d,j as v,Q as y,k as p,l as x}from"./index-fb423868.js";import{Q as V}from"./QForm-ac163a32.js";import{Q as h}from"./QPage-c4af3978.js";import{u as Q}from"./use-quasar-b2065ecf.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const C={__name:"ChangePasswordPage",setup(P){const u=Q(),c=_(),r=p(!1),s=p({current_password:"",new_password:"",new_password_confirmation:""}),m=async()=>{var t,a;r.value=!0;try{await x.post("/api/change-password",s.value),u.notify({color:"primary",textColor:"white",icon:"check_circle",message:"تم تغيير كلمة المرور بنجاح"}),s.value={current_password:"",new_password:"",new_password_confirmation:""},c.push("/")}catch(e){const w=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"فشل تغيير كلمة المرور";u.notify({color:"red-5",textColor:"white",icon:"warning",message:w})}finally{r.value=!1}};return(t,a)=>(g(),f(h,{class:"flex flex-center bg-grey-1"},{default:o(()=>[l(y,{class:"q-pa-md shadow-2 my_card",style:{width:"100%","max-width":"400px"}},{default:o(()=>[l(i,{class:"text-center"},{default:o(()=>[...a[3]||(a[3]=[n("div",{class:"text-h6 text-primary"},"تغيير كلمة المرور",-1),n("div",{class:"text-subtitle2 text-grey"},"أدخل كلمة المرور الحالية والجديدة",-1)])]),_:1}),l(i,null,{default:o(()=>[l(V,{onSubmit:m,class:"q-gutter-md"},{default:o(()=>[l(d,{filled:"",modelValue:s.value.current_password,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.current_password=e),label:"كلمة المرور الحالية",type:"password",rules:[e=>!!e||"مطلوب"]},null,8,["modelValue","rules"]),l(d,{filled:"",modelValue:s.value.new_password,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.new_password=e),label:"كلمة المرور الجديدة",type:"password",rules:[e=>!!e||"مطلوب",e=>e.length>=8||"يجب أن لا تقل عن 8 خانات"]},null,8,["modelValue","rules"]),l(d,{filled:"",modelValue:s.value.new_password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.new_password_confirmation=e),label:"تأكيد كلمة المرور الجديدة",type:"password",rules:[e=>!!e||"مطلوب",e=>e===s.value.new_password||"كلمة المرور غير متطابقة"]},null,8,["modelValue","rules"]),n("div",null,[l(v,{label:"تغيير كلمة المرور",type:"submit",color:"primary",class:"full-width",loading:r.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1}))}},I=b(C,[["__scopeId","data-v-cfc691ad"]]);export{I as default};
