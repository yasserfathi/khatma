import{m as P,ao as D,ap as N,q as A,a2 as $,an as G,c as R,w as d,k as h,l as U,o as u,g as e,a8 as o,a as s,d as T,a7 as p,e as M,a6 as j,i as Y,j as I,Q as C,aa as J,a9 as W,f as z,a5 as X,aq as Z}from"./index-fb423868.js";import{Q as ee}from"./QLinearProgress-9302dcdc.js";import{Q as te}from"./QTooltip-5adacf3a.js";import{Q as ae}from"./QPage-c4af3978.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./position-engine-c8cf3575.js";const re='<rect x="0" y="0" width="100" height="100" fill="none"></rect><g transform="translate(25 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.9"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 25)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.8"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.1s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(25 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.7"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.3s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g><g transform="translate(75 75)"><rect x="-20" y="-20" width="40" height="40" fill="currentColor" opacity="0.6"><animateTransform attributeName="transform" type="scale" from="1.5" to="1" repeatCount="indefinite" begin="0.2s" dur="1s" calcMode="spline" keySplines="0.2 0.8 0.2 0.8" keyTimes="0;1"></animateTransform></rect></g>',oe=P({name:"QSpinnerCube",props:D,setup(_){const{cSize:y,classes:v}=N(_);return()=>A("svg",{class:v.value,width:y.value,height:y.value,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",innerHTML:re})}}),ie='<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g>',ne=P({name:"QSpinnerOval",props:D,setup(_){const{cSize:y,classes:v}=N(_);return()=>A("svg",{class:v.value,stroke:"currentColor",width:y.value,height:y.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:ie})}});const le={class:"row justify-center"},ce={class:"col-12 col-md-8 text-center text-primary"},de={class:"clock-display q-mb-lg"},ue={class:"text-h3 text-weight-bolder text-primary tabular-nums tracking-wide shadow-text"},me={class:"text-subtitle1 text-grey-7 q-mt-sm"},he={class:"row q-col-gutter-xl justify-center"},pe={class:"col-12 col-md-4"},ye={class:"row items-center no-wrap"},ve={class:"col"},ge={key:0,class:"text-caption text-grey-8"},fe={key:1,class:"text-caption text-grey-6"},_e={class:"q-mt-xl"},xe={class:"row justify-between text-subtitle2 text-weight-bold q-mt-md"},we={class:"text-primary"},be={key:0,class:"text-grey-7"},ke={class:"col-12 col-md-4"},qe={class:"row items-center justify-between q-mb-lg"},Te={class:"column"},Ce={class:"text-caption text-grey-6"},Se={key:0,class:"row justify-center q-pa-xl"},Qe={key:1,class:"prayer-grid"},Me={class:"text-caption text-weight-bold opacity-80",style:{"font-size":"0.75rem"}},je={class:"text-h6 text-weight-bolder tabular-nums q-my-xs"},Ie={key:0,class:"next-label text-weight-bold"},ze={class:"col-12 col-md-4"},Pe={class:"absolute-right opacity-05",style:{"font-size":"20rem","line-height":"0",top:"-4rem",right:"-4rem"}},De={key:0,class:"row justify-center q-pa-md"},Ne={key:1,class:"column items-center full-width"},Ae={class:"ayah-text text-h5 text-center q-mb-lg",dir:"rtl"},Be={class:"row items-center q-gutter-x-md"},Le={class:"surah-info bg-white-20 q-px-lg q-py-xs rounded-borders-20 text-subtitle2 text-weight-bold"},Ve={__name:"IndexPage",setup(_){const y=h(""),v=h(""),x=h(null),S=h(!0),g=h(null),w=h(!0),n=h(null),f=h(!1),m=h(null),B={الفجر:{key:"Fajr",icon:"brightness_5"},الشروق:{key:"Sunrise",icon:"wb_sunny"},الظهر:{key:"Dhuhr",icon:"wb_sunny"},العصر:{key:"Asr",icon:"wb_cloudy"},المغرب:{key:"Maghrib",icon:"nights_stay"},العشاء:{key:"Isha",icon:"bedtime"}},b=t=>{if(!x.value)return!1;const a=new Date,r=a.getHours()*60+a.getMinutes(),l=Object.entries(x.value).filter(([c])=>["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"].includes(c)).map(([c,q])=>{const[K,O]=q.split(":").map(Number);return{key:c,minutes:K*60+O}}).sort((c,q)=>c.minutes-q.minutes);let i=l.find(c=>c.minutes>r);return i||(i=l[0]),i.key===t};let k=null;const Q=()=>{const t=new Date;y.value=t.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0}).replace("ص","ص").replace("م","م")},L=()=>{const t=new Date,a=new Intl.DateTimeFormat("ar-SA-u-ca-islamic-umalqura",{day:"numeric",month:"long",year:"numeric"}),r=new Intl.DateTimeFormat("ar-EG",{day:"numeric",month:"long",year:"numeric"});v.value=`${a.format(t)} | ${r.format(t)} م`},V=async()=>{try{const a=await(await fetch("https://api.aladhan.com/v1/timingsByCity?city=Makkah&country=SA&method=4")).json();x.value=a.data.timings}catch(t){console.error("Prayers error",t)}finally{S.value=!1}},F=async()=>{w.value=!0;try{const a=await(await fetch("https://api.alquran.cloud/v1/ayah/random/ar.alafasy")).json();g.value={text:a.data.text,surah:a.data.surah.name,numberInSurah:a.data.numberInSurah,audio:a.data.audio}}catch(t){console.error("Verse error",t)}finally{w.value=!1}},H=()=>{var t;(t=g.value)!=null&&t.audio&&(m.value||(m.value=new Audio(g.value.audio),m.value.onended=()=>{f.value=!1}),f.value?(m.value.pause(),m.value.currentTime=0,f.value=!1):(m.value.play(),f.value=!0))},E=async()=>{try{const t=await U.get("/api/khatmas",{params:{type:"tilawa"}});t.data&&t.data.length>0&&(n.value=t.data[0])}catch(t){console.error("Khatma error",t)}};return $(()=>{Q(),L(),V(),F(),E(),k=setInterval(Q,1e3)}),G(()=>{k&&clearInterval(k),m.value&&(m.value.pause(),m.value=null)}),(t,a)=>(u(),R(ae,{class:"q-pa-md"},{default:d(()=>[e("div",le,[e("div",ce,[a[0]||(a[0]=e("div",{class:"text-h5 text-weight-bold q-mb-md islamic-font"},"السلام عليكم ورحمة الله وبركاته",-1)),e("div",de,[e("div",ue,o(y.value),1),e("div",me,o(v.value),1)])])]),e("div",he,[e("div",pe,[s(C,{class:"glass-card full-height column border-primary-2 shadow-10 hover-lift"},{default:d(()=>[s(T,{class:"q-pb-none"},{default:d(()=>{var r,l,i,c;return[e("div",ye,[e("div",ve,[a[1]||(a[1]=e("div",{class:"text-subtitle1 text-primary text-weight-bold"},"تفاصيل ختمة التلاوة",-1)),n.value?(u(),p("div",ge,o(n.value.khatma_no)+" | "+o((r=n.value.group)==null?void 0:r.name),1)):(u(),p("div",fe,"لا توجد ختمات نشطة حالياً"))]),s(M,{color:"primary-1","text-color":"primary",icon:"menu_book",size:"48px",class:"shadow-2"})]),e("div",_e,[s(ee,{value:(l=n.value)!=null&&l.progress?n.value.progress.percentage/100:0,color:"primary","track-color":"primary-1",rounded:"",size:"12px",class:"shadow-inner"},null,8,["value"]),e("div",xe,[e("span",we,o((i=n.value)!=null&&i.progress?n.value.progress.percentage:0)+"% مكتمل",1),(c=n.value)!=null&&c.progress?(u(),p("span",be," ("+o(n.value.progress.finished)+" من "+o(n.value.progress.total)+" قراء استكملوا) ",1)):j("",!0)])])]}),_:1}),s(Y,{align:"center",class:"q-pa-md mt-auto"},{default:d(()=>[s(I,{unelevated:"",rounded:"",color:"primary",label:"عرض تفاصيل الختمة","icon-right":"chevron_left",to:"/khatma-tilawa",class:"full-width"})]),_:1})]),_:1})]),e("div",ke,[s(C,{class:"glass-card full-height shadow-15 border-gold overflow-hidden hover-lift"},{default:d(()=>[s(T,null,{default:d(()=>[e("div",qe,[e("div",Te,[a[2]||(a[2]=e("div",{class:"text-subtitle1 text-primary text-weight-bold"},"مواقيت صلاة مكة",-1)),e("div",Ce,o(v.value),1)]),s(M,{color:"amber-1","text-color":"amber-9",icon:"mosque",size:"40px"})]),S.value?(u(),p("div",Se,[s(oe,{color:"primary",size:"3em"})])):(u(),p("div",Qe,[(u(),p(J,null,W(B,(r,l)=>{var i;return e("div",{key:l,class:Z(["column items-center justify-center q-pa-md rounded-borders prayer-card transition-all",b(r.key)?"bg-gradient-gold text-white shadow-15 scale-105 active-prayer":"bg-white-50 text-grey-9"])},[s(z,{name:r.icon,size:"xs",color:b(r.key)?"white":"primary",class:"q-mb-xs"},null,8,["name","color"]),e("div",Me,o(l),1),e("div",je,o(((i=x.value)==null?void 0:i[r.key])||"--:--"),1),b(r.key)?(u(),p("div",Ie,"القادم")):j("",!0)],2)}),64))]))]),_:1})]),_:1})]),e("div",ze,[s(C,{class:"glass-card full-height bg-gradient-islamic text-white relative-position overflow-hidden shadow-20 border-primary-2 hover-lift"},{default:d(()=>[e("div",Pe,[s(z,{name:"menu_book"})]),s(T,{class:"column full-height justify-between q-pa-lg"},{default:d(()=>{var r,l,i;return[a[3]||(a[3]=e("div",{class:"text-subtitle2 text-weight-thin q-mb-md opacity-70"},"آية من الذكر الحكيم",-1)),w.value?(u(),p("div",De,[s(ne,{color:"white",size:"3em"})])):(u(),p("div",Ne,[e("div",Ae,' " '+o((r=g.value)==null?void 0:r.text)+' " ',1),e("div",Be,[s(I,{round:"",flat:"",color:"white",icon:f.value?"stop":"play_arrow",onClick:H,size:"lg",class:"bg-white-20 hover-scale shadow-5"},{default:d(()=>[s(te,null,{default:d(()=>[X(o(f.value?"إيقاف":"استماع"),1)]),_:1})]),_:1},8,["icon"]),e("div",Le,o((l=g.value)==null?void 0:l.surah)+" | آية "+o((i=g.value)==null?void 0:i.numberInSurah),1)])])),a[4]||(a[4]=e("div",{class:"text-caption text-right opacity-50 q-mt-md"},"تم التحديث تلقائياً",-1))]}),_:1})]),_:1})])])]),_:1}))}},Ge=se(Ve,[["__scopeId","data-v-8173d42f"]]);export{Ge as default};
